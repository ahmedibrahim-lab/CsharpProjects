@page
@model FinancialPlanner.Pages.GetInstitutionsModel
@{
    ViewData["Title"] = "Get Institutions";
}

<h1>API Response</h1>
<pre>@Model.Institutions</pre>

<h2>Select Institution and Create Agreement</h2>
<form method="post">
    <label for="institutionId">Select Institution:</label>
    <select id="institutionId" name="SelectedInstitutionId" asp-for="SelectedInstitutionId">
        @foreach (var institution in Model.Institutions)
        {
            <option value="@institution.Id">@institution.Name (@institution.Id)</option>
        }
    </select>
    <button type="submit" asp-page-handler="CreateAgreement">Create Agreement</button>
</form>

@if (!string.IsNullOrEmpty(Model.AgreementResponse))
{
    <h2>Agreement Response</h2>
    <pre>@Model.AgreementResponse</pre>
}
